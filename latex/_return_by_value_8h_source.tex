\doxysection{Return\+By\+Value.\+h}
\hypertarget{_return_by_value_8h_source}{}\label{_return_by_value_8h_source}\index{packages/Eigen.3.3.3/build/native/include/Eigen/src/Core/ReturnByValue.h@{packages/Eigen.3.3.3/build/native/include/Eigen/src/Core/ReturnByValue.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ This\ file\ is\ part\ of\ Eigen,\ a\ lightweight\ C++\ template\ library}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ for\ linear\ algebra.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ Copyright\ (C)\ 2009-\/2010\ Gael\ Guennebaud\ <gael.guennebaud@inria.fr>}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ Copyright\ (C)\ 2009-\/2010\ Benoit\ Jacob\ <jacob.benoit.1@gmail.com>}}
\DoxyCodeLine{00006\ \textcolor{comment}{//}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ This\ Source\ Code\ Form\ is\ subject\ to\ the\ terms\ of\ the\ Mozilla}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ Public\ License\ v.\ 2.0.\ If\ a\ copy\ of\ the\ MPL\ was\ not\ distributed}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ with\ this\ file,\ You\ can\ obtain\ one\ at\ http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_RETURNBYVALUE\_H}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#define\ EIGEN\_RETURNBYVALUE\_H}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{namespace\ }Eigen\ \{}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{namespace\ }internal\ \{}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Derived>}
\DoxyCodeLine{00019\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{traits}}<\mbox{\hyperlink{class_eigen_1_1_return_by_value}{ReturnByValue}}<Derived>\ >}
\DoxyCodeLine{00020\ \ \ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{traits}}<typename\ traits<Derived>::ReturnType>}
\DoxyCodeLine{00021\ \{}
\DoxyCodeLine{00022\ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{comment}{//\ We're\ disabling\ the\ DirectAccess\ because\ e.g.\ the\ constructor\ of}}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{comment}{//\ the\ Block-\/with-\/DirectAccess\ expression\ requires\ to\ have\ a\ coeffRef\ method.}}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{comment}{//\ Also,\ we\ don't\ want\ to\ have\ to\ implement\ the\ stride\ stuff.}}
\DoxyCodeLine{00026\ \ \ \ \ Flags\ =\ (\mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{traits<typename\ traits<Derived>::ReturnType}}>::Flags}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \ \ \ \ \ |\ \mbox{\hyperlink{group__flags_gaa34e83bae46a8eeae4e69ebe3aaecbed}{EvalBeforeNestingBit}})\ \&\ \string~\mbox{\hyperlink{group__flags_gabf1e9d0516a933445a4c307ad8f14915}{DirectAccessBit}}}
\DoxyCodeLine{00028\ \ \ \};}
\DoxyCodeLine{00029\ \};}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{comment}{/*\ The\ ReturnByValue\ object\ doesn't\ even\ have\ a\ coeff()\ method.}}
\DoxyCodeLine{00032\ \textcolor{comment}{\ *\ So\ the\ only\ way\ that\ nesting\ it\ in\ an\ expression\ can\ work,\ is\ by\ evaluating\ it\ into\ a\ plain\ matrix.}}
\DoxyCodeLine{00033\ \textcolor{comment}{\ *\ So\ internal::nested\ always\ gives\ the\ plain\ return\ matrix\ type.}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ *\ FIXME:\ I\ don't\ understand\ why\ we\ need\ this\ specialization:\ isn't\ this\ taken\ care\ of\ by\ the\ EvalBeforeNestingBit\ ??}}
\DoxyCodeLine{00036\ \textcolor{comment}{\ *\ Answer:\ EvalBeforeNestingBit\ should\ be\ deprecated\ since\ we\ have\ the\ evaluators}}
\DoxyCodeLine{00037\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00038\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Derived,\textcolor{keywordtype}{int}\ n,\textcolor{keyword}{typename}\ PlainObject>}
\DoxyCodeLine{00039\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1internal_1_1nested__eval}{nested\_eval}}<\mbox{\hyperlink{class_eigen_1_1_return_by_value}{ReturnByValue}}<Derived>,\ n,\ PlainObject>}
\DoxyCodeLine{00040\ \{}
\DoxyCodeLine{00041\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{traits<Derived>::ReturnType}}\ type;}
\DoxyCodeLine{00042\ \};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \}\ \textcolor{comment}{//\ end\ namespace\ internal}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Derived>\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_eigen_1_1_return_by_value}{ReturnByValue}}}
\DoxyCodeLine{00051\ \ \ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1dense__xpr__base}{internal::dense\_xpr\_base}}<\ ReturnByValue<Derived>\ >::type,\ \mbox{\hyperlink{class_eigen_1_1internal_1_1no__assignment__operator}{internal::no\_assignment\_operator}}}
\DoxyCodeLine{00052\ \{}
\DoxyCodeLine{00053\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Derived>::ReturnType}}\ ReturnType;}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ internal::dense\_xpr\_base<ReturnByValue>::type\ Base;}
\DoxyCodeLine{00057\ \ \ \ \ EIGEN\_DENSE\_PUBLIC\_INTERFACE(\mbox{\hyperlink{class_eigen_1_1_return_by_value}{ReturnByValue}})}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Dest>}
\DoxyCodeLine{00060\ \ \ \ \ EIGEN\_DEVICE\_FUNC}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ evalTo(Dest\&\ dst)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00062\ \textcolor{keyword}{\ \ \ \ }\{\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }Derived*\textcolor{keyword}{>}(\textcolor{keyword}{this})-\/>evalTo(dst);\ \}}
\DoxyCodeLine{00063\ \ \ \ \ EIGEN\_DEVICE\_FUNC\ \textcolor{keyword}{inline}\ Index\ rows()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }Derived*\textcolor{keyword}{>}(\textcolor{keyword}{this})-\/>rows();\ \}}
\DoxyCodeLine{00064\ \ \ \ \ EIGEN\_DEVICE\_FUNC\ \textcolor{keyword}{inline}\ Index\ cols()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }Derived*\textcolor{keyword}{>}(\textcolor{keyword}{this})-\/>cols();\ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_PARSED\_BY\_DOXYGEN}}
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#define\ Unusable\ YOU\_ARE\_TRYING\_TO\_ACCESS\_A\_SINGLE\_COEFFICIENT\_IN\_A\_SPECIAL\_EXPRESSION\_WHERE\_THAT\_IS\_NOT\_ALLOWED\_BECAUSE\_THAT\_WOULD\_BE\_INEFFICIENT}}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_eigen_1_1_return_by_value_1_1_unusable}{Unusable}}\{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_return_by_value_1_1_unusable}{Unusable}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_return_by_value_1_1_unusable}{Unusable}}\&)\ \{\}}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \mbox{\hyperlink{class_eigen_1_1_return_by_value_1_1_unusable}{Unusable}}\&\ operator=(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_return_by_value_1_1_unusable}{Unusable}}\&)\ \{\textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};\}}
\DoxyCodeLine{00071\ \ \ \ \ \};}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_return_by_value_1_1_unusable}{Unusable}}\&\ coeff(Index)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{class_eigen_1_1_return_by_value_1_1_unusable}{Unusable}}*\textcolor{keyword}{>}(\textcolor{keyword}{this});\ \}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{const}\ Unusable\&\ coeff(Index,Index)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }Unusable*\textcolor{keyword}{>}(\textcolor{keyword}{this});\ \}}
\DoxyCodeLine{00074\ \ \ \ \ Unusable\&\ coeffRef(Index)\ \{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{reinterpret\_cast<}Unusable*\textcolor{keyword}{>}(\textcolor{keyword}{this});\ \}}
\DoxyCodeLine{00075\ \ \ \ \ Unusable\&\ coeffRef(Index,Index)\ \{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{reinterpret\_cast<}Unusable*\textcolor{keyword}{>}(\textcolor{keyword}{this});\ \}}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#undef\ Unusable}}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00078\ \};}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Derived>}
\DoxyCodeLine{00081\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OtherDerived>}
\DoxyCodeLine{00082\ Derived\&\ \mbox{\hyperlink{class_eigen_1_1_dense_base_a581a7a353bd007b5352f11688e3bc5fa}{DenseBase<Derived>::operator=}}(\textcolor{keyword}{const}\ ReturnByValue<OtherDerived>\&\ other)}
\DoxyCodeLine{00083\ \{}
\DoxyCodeLine{00084\ \ \ other.evalTo(derived());}
\DoxyCodeLine{00085\ \ \ \textcolor{keywordflow}{return}\ derived();}
\DoxyCodeLine{00086\ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{keyword}{namespace\ }internal\ \{}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \textcolor{comment}{//\ Expression\ is\ evaluated\ in\ a\ temporary;\ default\ implementation\ of\ Assignment\ is\ bypassed\ so\ that}}
\DoxyCodeLine{00091\ \textcolor{comment}{//\ when\ a\ ReturnByValue\ expression\ is\ assigned,\ the\ evaluator\ is\ not\ constructed.}}
\DoxyCodeLine{00092\ \textcolor{comment}{//\ TODO:\ Finalize\ port\ to\ new\ regime;\ ReturnByValue\ should\ not\ exist\ in\ the\ expression\ world}}
\DoxyCodeLine{00093\ \ \ }
\DoxyCodeLine{00094\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Derived>}
\DoxyCodeLine{00095\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator}}<\mbox{\hyperlink{class_eigen_1_1_return_by_value}{ReturnByValue}}<Derived>\ >}
\DoxyCodeLine{00096\ \ \ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator}}<typename\ internal::traits<Derived>::ReturnType>}
\DoxyCodeLine{00097\ \{}
\DoxyCodeLine{00098\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{class_eigen_1_1_return_by_value}{ReturnByValue<Derived>}}\ \mbox{\hyperlink{class_eigen_1_1_return_by_value}{XprType}};}
\DoxyCodeLine{00099\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1traits}{internal::traits<Derived>::ReturnType}}\ PlainObject;}
\DoxyCodeLine{00100\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator<PlainObject>}}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1evaluator}{Base}};}
\DoxyCodeLine{00101\ \ \ }
\DoxyCodeLine{00102\ \ \ EIGEN\_DEVICE\_FUNC\ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1evaluator}{evaluator}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_eigen_1_1_return_by_value}{XprType}}\&\ xpr)}
\DoxyCodeLine{00103\ \ \ \ \ :\ m\_result(xpr.rows(),\ xpr.cols())}
\DoxyCodeLine{00104\ \ \ \{}
\DoxyCodeLine{00105\ \ \ \ \ ::new\ (\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{struct_eigen_1_1internal_1_1evaluator}{Base}}*\textcolor{keyword}{>}(\textcolor{keyword}{this}))\ \mbox{\hyperlink{struct_eigen_1_1internal_1_1evaluator}{Base}}(m\_result);}
\DoxyCodeLine{00106\ \ \ \ \ xpr.evalTo(m\_result);}
\DoxyCodeLine{00107\ \ \ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00110\ \ \ PlainObject\ m\_result;}
\DoxyCodeLine{00111\ \};}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \}\ \textcolor{comment}{//\ end\ namespace\ internal}}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \}\ \textcolor{comment}{//\ end\ namespace\ Eigen}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ EIGEN\_RETURNBYVALUE\_H}}

\end{DoxyCode}
